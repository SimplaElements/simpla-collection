<link rel="import" href="../polymer/polymer.html"> <link rel="import" href="../simpla-element-behavior/simpla-element-behavior.html"> <dom-module id="simpla-collection"> <template> <style>:host{display:block}</style> <template is="dom-if" if="[[editable]]"> <simpla-collection-editor path="[[path]]" as="[[as]]" items="{{items}}" active="{{active}}"> </simpla-collection-editor> </template> <slot></slot> </template> <script>!function(){"use strict";var e="simpla-collection-editor.html",t={type:"Collection",dataProperties:["items"]};Polymer({is:"simpla-collection",properties:{items:{type:Array,value:function(){return[]}},as:{type:String,value:"item"},active:{type:Boolean,notify:!0,value:!1},editable:{type:Boolean,observer:"_importEditor",notify:!0,value:!1}},observers:["_render(items.*)"],behaviors:[SimplaBehaviors.Element(t)],_render:function(){for(var e=this,t=Polymer.dom(this),r=t.querySelector("template"),i=this.items,o=function(t,r){var i=["path","sid","gid"];i.forEach(function(i){Array.prototype.forEach.call(t.querySelectorAll("["+i+"]"),function(t){var o=t.getAttribute(i);t.setAttribute(i,o.replace("["+e.as+"]",r))})})};t.children.length>1;)t.removeChild(t.children[1]);i.forEach(function(e,i){var l=document.importNode(r.content,!0);o(l,e.id),t.appendChild(l)}),Polymer.dom.flush()},_importEditor:function(t){t&&this.importHref(this.resolveUrl(e))}})}(); </script> </dom-module> 