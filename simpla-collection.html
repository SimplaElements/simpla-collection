<link rel="import" href="../polymer/polymer.html"> <link rel="import" href="../simpla-element-behavior/simpla-element-behavior.html"> <dom-module id="simpla-collection"> <template> <style>:host{display:block;position:relative}</style> <template is="dom-if" if="[[editable]]"> <simpla-collection-editor items="{{items}}" as="[[as]]" active="{{active}}" data-edit-button-visible$="[[_editButtonVisible]]" on-collection-item-edit="_handleEdit"> </simpla-collection-editor> </template> <slot></slot> </template> <script>!function(){"use strict";var t=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)},e="simpla-collection-editor.html",i={type:"Collection",dataProperties:["items"]};Polymer({is:"simpla-collection",properties:{items:{type:Array,value:function(){return[]}},as:{type:String,value:"item"},active:{type:Boolean,notify:!0,value:!1},editable:{type:Boolean,observer:"_importEditor",notify:!0,value:!1},_editButtonVisible:Boolean},listeners:{mouseover:"_showEditButton",mouseout:"_hideEditButton"},observers:["_render(items.*)"],behaviors:[SimplaBehaviors.Element(i)],_render:function(){for(var t=this,e=Polymer.dom(this).querySelector("template"),i=this.items,o=function(e,i){var o=["path","sid","gid"];o.forEach(function(o){Array.prototype.forEach.call(e.querySelectorAll("["+o+"]"),function(e){var r=e.getAttribute(o);e.setAttribute(o,r.replace("["+t.as+"]",i))})})};this.children.length>1;)Polymer.dom(this).removeChild(this.children[1]);i.forEach(function(i,r){var n=document.importNode(e.content,!0);o(n,i.id),Polymer.dom(t).appendChild(n)})},_handleEdit:function(e){var i=e.detail.action,o=e.detail.args;e.stopPropagation(),this[i].apply(this,t(o))},_importEditor:function(t){t&&this.importHref(this.resolveUrl(e))},_showEditButton:function(){this._editButtonVisible=!0},_hideEditButton:function(){this._editButtonVisible=!1}})}(); </script> </dom-module> 